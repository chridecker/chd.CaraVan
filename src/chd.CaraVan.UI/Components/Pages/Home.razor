@page "/"
@using chd.CaraVan.Contracts.Dtos
@using chd.CaraVan.UI.Components.Pages.Cards

<PageTitle>Home</PageTitle>


<MudCarousel Class="mud-width-full" Style="min-height:12rem" ShowBullets="false" ShowArrows="true" EnableSwipeGesture="true" TData="object">
    @if (this.VotronicBatteryData != null)
    {
        <MudCarouselItem Transition="@Transition.Slide" Color="@Color.Primary">
            <MudCard Outlined="true" Class="device-card" @onclick="this.NavigateToBattery">
                <MudCardHeader>
                    <MudIcon Icon="@Icons.Material.Filled.Battery6Bar" />
                    <MudText Typo="Typo.subtitle2"> Batterie</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <BatteryLevelCard ValuePerecent="@((double)VotronicBatteryData.Percent)" Value="@VotronicBatteryData.AmpereH" />
                    @* <BatteryData Type="EDataType.BatteryPercent" DateTime="@VotronicBatteryData?.DateTime" Value="@(VotronicBatteryData?.Percent.ToString("n2"))" /> *@
                    @* <BatteryData Type="EDataType.Ampere" DateTime="@VotronicBatteryData?.DateTime" Value="@(VotronicBatteryData?.Ampere.ToString("n2"))" /> *@
                </MudCardContent>
            </MudCard>
        </MudCarouselItem>

        <MudCarouselItem Transition="@Transition.Slide" Color="@Color.Primary">
            <MudCard Outlined="true" Class="device-card" @onclick="this.NavigateToBattery">
                <MudCardHeader>
                    <MudIcon Icon="@Icons.Material.Filled.SolarPower" />
                    <MudText Typo="Typo.subtitle2"> Solar</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <BatteryData Type="EDataType.Ampere" DateTime="@VotronicSolarData?.DateTime" Value="@(VotronicSolarData?.Ampere.ToString("n2"))" />
                    <BatteryData Type="EDataType.BatteryLoadingState" DateTime="@VotronicSolarData?.DateTime" Value="@(VotronicSolarData?.State)" />
                </MudCardContent>
            </MudCard>
        </MudCarouselItem>
    }
</MudCarousel>
<MudSpacer />
<MudCarousel Style="min-height:10rem" Class="mud-width-full chd-carousel" ShowBullets="false" ShowArrows="true" EnableSwipeGesture="true" TData="object">
    @foreach (var device in this.DeviceSettings.CurrentValue.RuuviTags)
    {
        <MudCarouselItem Transition="@Transition.Slide" Color="@Color.Primary">
            <RuuviTagCard DeviceDto="device" />
        </MudCarouselItem>
    }
</MudCarousel>
